{"version":3,"sources":["pages/server.uvue","pages/server.uvue?type=page"],"sourcesContent":["<template>\r\n\t<view class=\"content\">\r\n\t\t<view class=\"btns\">\r\n\t\t\t<button v-if=\"!isStart\" type=\"primary\" size=\"mini\" @click=\"onEnableClick\">启动UDP服务</button>\r\n\t\t\t<button v-else type=\"warn\" size=\"mini\" @click=\"onDisableClick\">停止UDP服务</button>\r\n\t\t</view>\r\n\t\t<view class=\"status\">{{ isStart ? \"UDP服务已启动\" : \"UDP服务未启动\" }}</view>\r\n\t\t<view class=\"box\">\r\n\t\t\t<view v-for=\"item in messages\" class=\"item\">\r\n\t\t\t\t<view class=\"info\">\r\n\t\t\t\t\t<text class=\"label\">主机：{{ item.host }}</text>\r\n\t\t\t\t\t<text class=\"label\">端口：{{ item.port }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"msg\">消息：{{ item.msg }}</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script lang=\"uts\">\r\n\timport {\r\n\t\tUDPServer,\r\n\t\tUDPData\r\n\t} from \"@/uni_modules/uts-udp\";\r\n\r\n\tvar server : UDPServer | null = null;\r\n\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tmessages: [] as UDPData[],\r\n\t\t\t\tisStart: false\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tonEnableClick() {\r\n\t\t\t\tif (this.isStart) return;\r\n\t\t\t\tif (server == null) {\r\n\t\t\t\t\tserver = new UDPServer(7000);\r\n\t\t\t\t}\r\n\t\t\t\tserver?.listener(\r\n\t\t\t\t\t(data) => {\r\n\t\t\t\t\t\tthis.messages.push(data)\r\n\t\t\t\t\t\t// 回复客户端\r\n\t\t\t\t\t\tserver?.send(`已收到消息：${data.msg}`, data.host, data.port);\r\n\t\t\t\t\t},\r\n\t\t\t\t\t(error) => {\r\n\t\t\t\t\t\tconsole.error(error);\r\n\t\t\t\t\t\tthis.isStart = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t\tthis.isStart = true;\r\n\t\t\t},\r\n\t\t\tonDisableClick() {\r\n\t\t\t\tserver?.stop();\r\n\t\t\t\tthis.isStart = false;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.btns {\r\n\t\tpadding: 10px;\r\n\t}\r\n\r\n\t.box {\r\n\t\tpadding: 10px;\r\n\r\n\t}\r\n\r\n\t.box .item {\r\n\t\tpadding: 10px;\r\n\r\n\t}\r\n</style>",null],"names":[],"mappings":";;;;;;;;;;;;;;;;AAoBC,8BACC;8BACA;AAKc;;;;;;eA1Bf,mBAeO,QAAA,SAfD,WAAM,YAAS;YACpB,mBAGO,QAAA,SAHD,WAAM,SAAM;4BACF,KAAA,OAAO;oBAAtB,YAA0F,mBAAA,SAH7F,SAAA,CAAA,EAG2B,UAAK,WAAU,UAAK,QAAQ,aAAO,KAAA,aAAa,YAH3E,aAAA,QAG6E,gBAAO,GAAA;+BAAA;4BAAP;yBAAO;wBAHpF,OAAA,CAAA;;;;oBAIG,YAA+E,mBAAA,SAJlF,SAAA,CAAA,EAIkB,UAAK,QAAO,UAAK,QAAQ,aAAO,KAAA,cAAc,YAJhE,aAAA,QAIkE,gBAAO,GAAA;+BAAA;4BAAP;yBAAO;;uBAJzE,OAAA,CAAA;;;;;YAME,mBAAmE,QAAA,SAA7D,WAAM,WAAQ,gBAAI,IAAA,KAAA,OAAO;gBAAA;;gBAAA;;YAAA,GAAA,CAAA;YAC/B,mBAQO,QAAA,SARD,WAAM,QAAK;gBAChB,mBAMO,UAAA,IAAA,EAdV,cAAA,UAAA,CAQwB,KAAA,QAAQ,EARhC,IAQgB,MAAA,GAAA,IAAI,MAAA;2BAAjB,mBAMO,QAAA,SANwB,WAAM,SAAM;wBAC1C,mBAGO,QAAA,SAHD,WAAM,SAAM;4BACjB,mBAA6C,QAAA,SAAvC,WAAM,UAAQ,QAAG,gBAAG,KAAK,IAAI,GAAA,CAAA;4BACnC,mBAA6C,QAAA,SAAvC,WAAM,UAAQ,QAAG,gBAAG,KAAK,IAAI,GAAA,CAAA;;wBAEpC,mBAA0C,QAAA,SAApC,WAAM,QAAM,QAAG,gBAAG,KAAK,GAAG,GAAA,CAAA;;;;;;;gCAiBhB;;;;sCAAN,WAAM,yBACP,KAAK;;;aAIf,gBAAA,MAAgB;YACf,IAAI,IAAI,CAAC,OAAO;gBAAE;;YAClB,IAAI,UAAU,IAAI,EAAE;gBACnB,SAAS,AAAI,UAAU,IAAI;YAC5B;YACA,QAAQ,SACP,IAAC,KAAS;gBACT,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC;gBAEnB,QAAQ,KAAK,GAAC,MAAM,EAAE,KAAK,GAAG,CAAC,GAAC,EAAE,KAAK,IAAI,EAAE,KAAK,IAAI;YACvD;cACA,IAAC,MAAU;gBACV,QAAQ,KAAK,CAAC;gBACd,IAAI,CAAC,OAAO,GAAG,KAAK;YACrB;;YAED,IAAI,CAAC,OAAO,GAAG,IAAI;QACpB;;aACA,iBAAA,MAAiB;YAChB,QAAQ;YACR,IAAI,CAAC,OAAO,GAAG,KAAK;QACrB;;;sBArBA;sBAkBA;;;;;;;;;;;;;;;AAKF"}