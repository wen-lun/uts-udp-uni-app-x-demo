{"version":3,"names":[],"sources":["pages/server.uvue"],"sourcesContent":["<template>\r\n\t<view class=\"content\">\r\n\t\t<view class=\"btns\">\r\n\t\t\t<button v-if=\"!isStart\" type=\"primary\" size=\"mini\" @click=\"onEnableClick\">启动UDP服务</button>\r\n\t\t\t<button v-else type=\"warn\" size=\"mini\" @click=\"onDisableClick\">停止UDP服务</button>\r\n\t\t</view>\r\n\t\t<view class=\"status\">{{ isStart ? \"UDP服务已启动\" : \"UDP服务未启动\" }}</view>\r\n\t\t<view class=\"box\">\r\n\t\t\t<view v-for=\"item in messages\" class=\"item\">\r\n\t\t\t\t<view class=\"info\">\r\n\t\t\t\t\t<text class=\"label\">主机：{{ item.host }}</text>\r\n\t\t\t\t\t<text class=\"label\">端口：{{ item.port }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"msg\">消息：{{ item.msg }}</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script lang=\"uts\">\r\nimport {\r\n\tUDPServer,\r\n\tUDPData\r\n} from \"@/uni_modules/uts-udp\";\r\n\r\nvar server : UDPServer | null = null;\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tmessages: [] as UDPData[],\r\n\t\t\tisStart: false\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tonEnableClick() {\r\n\t\t\tif (this.isStart) return;\r\n\t\t\tif (server == null) {\r\n\t\t\t\tserver = new UDPServer(7000);\r\n\t\t\t}\r\n\t\t\tserver?.listener(\r\n\t\t\t\t(data) => {\r\n\t\t\t\t\tthis.messages.push(data)\r\n\t\t\t\t\t// 回复客户端\r\n\t\t\t\t\tserver?.send(`已收到消息：${data.msg}`, data.host, data.port);\r\n\t\t\t\t},\r\n\t\t\t\t(error) => {\r\n\t\t\t\t\tconsole.error(error);\r\n\t\t\t\t\tthis.isStart = false;\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t\tthis.isStart = true;\r\n\t\t},\r\n\t\tonDisableClick() {\r\n\t\t\tserver?.stop();\r\n\t\t\tthis.isStart = false;\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style>\r\n\t.btns {\r\n\t\tpadding: 10px;\r\n\t}\r\n\r\n\t.box {\r\n\t\tpadding: 10px;\r\n\r\n\t}\r\n\r\n\t.box .item {\r\n\t\tpadding: 10px;\r\n\r\n\t}\r\n</style>"],"mappings":"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"}